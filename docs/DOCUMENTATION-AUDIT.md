# Documentation Audit and Update Plan

**Date:** 2025-11-12  
**Status:** In Progress

## Overview

This document tracks the comprehensive documentation audit and updates needed across the tinct project. Recent changes include plugin description updates, British English standardization, new plugin management features, and code refactoring.

## Quick Summary

- **Total Markdown Files:** 31
- **Files with "colour" instances:** ~20 files (617 total instances)
- **Priority:** High (affects user-facing documentation)

## Phase 1: British English Standardization

### Automated Conversion

**Script:** `scripts/british-english-docs.sh`

**Conversions:**
- `colour` → `colour`
- `Colour` → `Colour`
- `colours` → `colours`
- `colour scheme` → `colour scheme`
- `categorisation` → `categorisation`
- `customise` → `customise`
- `organise` → `organise`

**Files by Priority:**

| Priority | File | Instances | Status |
|----------|------|-----------|--------|
| High | docs/TEMPLATE_GUIDE.md | 108 | Pending |
| High | docs/external-plugins.md | 54 | Pending |
| High | docs/DEVELOPMENT.md | 51 | Pending |
| High | README.md | 22 | In Progress |
| Medium | internal/plugin/output/hyprlock/README.md | 42 | Pending |
| Medium | contrib/plugins/output/templater/README.md | 39 | Pending |
| Medium | internal/plugin/input/file/README.md | 38 | Pending |
| Medium | internal/plugin/output/dunst/README.md | 37 | Pending |
| Low | All other .md files | ~200 | Pending |

**Steps:**
1. ✓ Create conversion script
2. ⏳ Run script with backup
3. ⏳ Review git diff
4. ⏳ Test documentation rendering
5. ⏳ Commit changes

## Phase 2: Update Plugin Descriptions

### Main README.md Plugin Sections

**Current (Outdated):**
```markdown
- **hyprland**: Hyprland window manager (colour themes)
- **kitty**: Kitty terminal emulator
- **waybar**: Waybar status bar
```

**Updated (Should be):**
```markdown
- **hyprland**: Hyprland compositor theme
- **kitty**: Kitty terminal colour theme
- **waybar**: Waybar status bar theme
```

**Files to Update:**
- [ ] README.md - Available Plugins section
- [ ] docs/PLUGINS-WISHLIST.md - Check descriptions
- [ ] internal/plugin/README.md - Plugin interface examples

## Phase 3: Add Missing Documentation

### 1. Force-Install Script

**Location:** README.md - Plugin Management section

**Content to Add:**
```markdown
### Development: Force-Install All Plugins

After building plugins, you can force-install all of them at once:

\```bash
# Install all built plugins (overwrites existing)
./out/force-install-plugins.sh
\```

This script is auto-generated by the Makefile and installs all plugins from `./out/plugins/input/*` and `./out/plugins/output/*` using `--force` mode.

**Use Cases:**
- Testing plugin changes during development
- Resetting all plugins to match built versions
- Batch plugin installation for demos
```

**Status:** ⏳ Pending

### 2. Plugin Safety Checks

**Location:** README.md - Plugin Management section

**Content to Add:**
```markdown
### Plugin Safety and Version Management

When adding plugins, tinct performs comprehensive safety checks:

1. **Metadata Query:** Verifies plugin responds to `--plugin-info`
2. **Protocol Compatibility:** Checks plugin protocol matches tinct version
3. **Version Comparison:** Detects upgrades, downgrades, or reinstalls
4. **Smart Authorization:**
   - **Upgrades:** Proceed automatically (newer version)
   - **Downgrades:** Require `--force` flag
   - **Same Version:** Require `--force` flag

\```bash
# Upgrade automatically proceeds
tinct plugins add ./my-plugin-v2.0.sh

# Downgrade requires --force
tinct plugins add ./my-plugin-v1.0.sh --force

# Reinstall same version requires --force
tinct plugins add ./my-plugin-v1.5.sh --force
\```

**Safety Features:**
- ⚠️  Warning in help text to only install trusted plugins
- Source/destination file comparison (prevents self-copy)
- Graceful handling of missing plugin files
```

**Status:** ⏳ Pending

### 3. Recent Code Refactoring

**Location:** docs/DEVELOPMENT.md

**Content to Add:**
```markdown
### Plugin Code Organization

The CLI plugin management code is organized into multiple files:

- `plugin.go` (747 lines): Core commands, lock file management
- `plugin_config.go` (252 lines): Enable/disable/clear commands
- `plugin_add.go` (248 lines): Plugin addition workflow and safety checks
- `plugin_install.go` (472 lines): Installation from various sources (local, HTTP, git)
- `plugin_util.go` (60 lines): Shared utility functions
- `plugin_list_helpers.go` (263 lines): Plugin list display logic

This organization improves maintainability and makes it easier to understand each aspect of plugin management.
```

**Status:** ⏳ Pending

## Phase 4: Architecture Diagrams

### 1. Plugin Architecture Flow

**Location:** README.md - Architecture section

```
┌─────────────────┐
│  Input Plugins  │
│                 │
│ • image         │
│ • google-genai  │
│ • remote-json   │
│ • remote-css    │
│ • file          │
└────────┬────────┘
         │ Extract Colours
         ↓
┌─────────────────┐
│  Categoriser    │
│                 │
│ • K-means       │
│ • Luminance     │
│ • WCAG Check    │
│ • Role Hints    │
└────────┬────────┘
         │ Categorised Palette
         ↓
┌─────────────────┐
│ Output Plugins  │
│                 │
│ • hyprland      │
│ • kitty         │
│ • waybar        │
│ • LEDs/devices  │
└─────────────────┘
         │ Generate Config
         ↓
    Config Files
```

**Status:** ⏳ Pending

### 2. Plugin Management Workflow

**Location:** docs/DEVELOPMENT.md

```
plugin add <source>
       │
       ├─→ Resolve Source (local/http/git)
       │
       ├─→ Query Metadata (--plugin-info)
       │   └─→ Name, Type, Version, Protocol
       │
       ├─→ Check Protocol Compatibility
       │   ├─→ ✓ Compatible → Continue
       │   └─→ ✗ Incompatible → Error
       │
       ├─→ Version Comparison
       │   ├─→ New Plugin → Add
       │   ├─→ Upgrade → Allow
       │   ├─→ Downgrade → Require --force
       │   └─→ Same Version → Require --force
       │
       ├─→ Copy to Plugin Directory
       │   └─→ ~/.local/share/tinct/plugins/
       │
       └─→ Update Lock File
           └─→ .tinct-plugins.json
```

**Status:** ⏳ Pending

### 3. Colour Extraction Pipeline

**Location:** internal/plugin/input/image/README.md

```
Image File
    │
    ↓
Decode & Resize
    │
    ↓
K-means Clustering ←─── Seed Configuration
    │                   (content/filepath/manual/random)
    ├─→ Main Colours (N colours)
    │
    └─→ Ambient Extraction (optional)
        └─→ Edge/Corner Regions
            ├─→ topLeft, top, topRight
            ├─→ left, right
            └─→ bottomLeft, bottom, bottomRight
```

**Status:** ⏳ Pending

## Phase 5: Plugin-Specific Documentation

### Files to Review and Update

#### Input Plugins
- [ ] internal/plugin/input/README.md
- [ ] internal/plugin/input/file/README.md
- [ ] internal/plugin/input/googlegenai/README.md
- [ ] internal/plugin/input/image/README.md
- [ ] internal/plugin/input/remotecss/README.md
- [ ] internal/plugin/input/remotejson/README.md
- [ ] internal/plugin/input/shared/regions/README.md

#### Output Plugins
- [ ] internal/plugin/output/README.md
- [ ] internal/plugin/output/PLUGIN-STANDARD.md
- [ ] internal/plugin/output/dunst/README.md
- [ ] internal/plugin/output/fuzzel/README.md
- [ ] internal/plugin/output/hyprlock/README.md
- [ ] internal/plugin/output/hyprpaper/README.md

#### External Plugins (contrib/)
- [ ] contrib/README.md
- [ ] contrib/plugins/README.md
- [ ] contrib/plugins/input/random/README.md
- [ ] contrib/plugins/output/dunstify/README.md
- [ ] contrib/plugins/output/templater/README.md
- [ ] contrib/plugins/output/templater/QUICKSTART.md
- [ ] contrib/plugins/output/wob/README.md

#### Documentation (docs/)
- [ ] docs/DEVELOPMENT.md
- [ ] docs/external-plugins.md
- [ ] docs/plugin-hooks.md
- [ ] docs/PLUGIN-PROTOCOLS.md
- [ ] docs/PLUGINS-WISHLIST.md
- [ ] docs/SETUP.md
- [ ] docs/TEMPLATE_GUIDE.md
- [ ] docs/THEME-COOKBOOK.md

## Phase 6: Verification

### Checklist

- [ ] All markdown files use British English consistently
- [ ] Plugin descriptions match code (recent updates)
- [ ] All new features documented
- [ ] Architecture diagrams added
- [ ] Code examples tested
- [ ] Links work correctly
- [ ] Formatting consistent
- [ ] No broken references

### Testing

1. **Render Check:** Verify markdown renders correctly in GitHub
2. **Link Check:** Test all internal and external links
3. **Code Examples:** Run all bash/code examples
4. **Cross-References:** Verify all document cross-references are accurate

## Notes

### Words to Preserve (Don't Convert)

Some technical terms should keep American spelling:
- Variable names in code: `backgroundColor`, `colorScheme` (in code blocks)
- URLs: `colour` in external links
- Tool names: `colorpicker` (if it's an actual tool name)

The conversion script should skip:
- Code blocks (```...```)
- Inline code (`...`)
- URLs (http://...)

### Maintenance

After initial audit:
- Add linting for British English in CI
- Document style guide for contributors
- Update CONTRIBUTING.md with language requirements

## Timeline

**Estimated Effort:** 4-6 hours
- Phase 1 (British English): 1 hour (automated + review)
- Phase 2 (Plugin Descriptions): 30 minutes
- Phase 3 (Missing Documentation): 1 hour
- Phase 4 (Diagrams): 1-2 hours
- Phase 5 (Plugin-Specific): 1-2 hours
- Phase 6 (Verification): 30 minutes
